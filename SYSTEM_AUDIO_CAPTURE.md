# 系统音频捕获说明

## 当前支持情况

### ✅ 理论上支持

项目**可以**捕获系统播放的音乐/声音，但需要满足以下条件：

1. **系统必须有"立体声混音"或虚拟音频设备**
   - Windows 的"立体声混音"（Stereo Mix）
   - 虚拟音频设备（如 VB-CABLE、BlackHole 等）

2. **这些设备必须显示为"输入设备"**
   - 项目使用 `sounddevice` 库，只能检测音频输入设备
   - 如果"立体声混音"或虚拟设备被识别为输入设备，就会出现在设备列表中

### ❌ 实际情况

**Windows 默认情况下：**
- "立体声混音"默认是**禁用**的
- 设备列表中通常只能看到**麦克风设备**
- **无法直接捕获系统音频**

## 如何启用系统音频捕获

### 方法 1：启用 Windows 立体声混音（如果可用）

1. **检查是否有立体声混音**：
   - 右键点击任务栏的扬声器图标
   - 选择"声音设置" → "声音控制面板"
   - 切换到"录制"标签页
   - 查看是否有"立体声混音"（Stereo Mix）

2. **如果存在但被禁用**：
   - 右键点击"立体声混音"
   - 选择"启用"
   - 设置为默认录制设备（可选）

3. **如果不存在**：
   - 可能需要更新声卡驱动
   - 或者使用虚拟音频设备（方法 2）

### 方法 2：使用虚拟音频设备（推荐）

#### Windows 用户：VB-CABLE

1. **下载安装**：
   - 访问：https://vb-audio.com/Cable/
   - 下载并安装 VB-CABLE

2. **配置**：
   - 安装后，系统会新增 "CABLE Input" 和 "CABLE Output"
   - 在 Windows 声音设置中，将 "CABLE Input" 设为默认播放设备
   - 在项目中选择 "CABLE Output" 作为输入设备

3. **使用**：
   - 播放音乐时，声音会路由到 CABLE
   - 项目从 CABLE Output 捕获音频

#### macOS 用户：BlackHole

1. **下载安装**：
   - 访问：https://github.com/ExistentialAudio/BlackHole
   - 下载并安装 BlackHole

2. **配置**：
   - 在系统设置中，将 "BlackHole" 设为默认输出设备
   - 在项目中选择 "BlackHole" 作为输入设备

## 设备列表说明

项目会列出所有**音频输入设备**，包括：

- ✅ 麦克风设备（物理麦克风）
- ✅ 立体声混音（如果已启用）
- ✅ 虚拟音频设备（如 VB-CABLE Output）
- ❌ 不会显示纯输出设备（如扬声器）

## 如何确认是否支持系统音频捕获

1. **查看设备列表**：
   - 打开项目前端
   - 查看"音频输入设备"下拉菜单
   - 如果看到"立体声混音"或"VB-CABLE Output"等设备，说明支持

2. **测试**：
   - 选择系统音频设备（立体声混音或虚拟设备）
   - 播放音乐
   - 点击"开始转写"
   - 如果能看到转写结果，说明成功捕获系统音频

## 总结

| 场景 | 是否支持 | 说明 |
|------|---------|------|
| 麦克风输入 | ✅ 完全支持 | 默认即可使用 |
| 系统音频（立体声混音） | ⚠️ 需要启用 | Windows 默认禁用 |
| 系统音频（虚拟设备） | ✅ 完全支持 | 需要安装 VB-CABLE 等 |
| 特定应用音频 | ⚠️ 间接支持 | 通过虚拟设备路由 |

## 推荐方案

**最简单的方法**：安装 VB-CABLE
- 一次安装，永久使用
- 可以捕获所有系统音频
- 也可以捕获特定应用的音频（通过应用内选择输出设备）

